# Flutterサンプルアプリ

## アプリ概要

比較的簡素なソフトウェアアーキテクチャをベースに、メモ帳アプリを作成してみました。初心者向けのテンプレートであることを念頭に置きながら作りました。

FreezedやRiverpod等の、制御機構の構成において必要なパッケージを導入し、その他ルーティングや永続化(端末保存)等の基盤的な仕組みを除いて、必要以上と考えられるパッケージは導入しないことを試みています。

良ければ、これをベースに、+αなアプリを自由に創作していただけたらと思います。FirebaseやDio等を使って、ECやSNSのような分散システムを作ってみても良いですし、File PickerやFlutter Sound等を活用して、音楽再生アプリを作っても面白いと思います。

ただし、これは中規模程度のアプリを想定して作っていますので、機能要件が膨れ上がっていくにつれ、この仕組みでは適切な責任範囲で作業分担することができない可能性があります。関心を分離するとも言います。その場合は、オニオンアーキテクチャやクリーンアーキテクチャ等の大規模システムに使われるアーキテクチャを検討することをオススメします。


## 実行環境について

各パッケージの導入について、以下のコマンドを実行してください。  
<pre>
flutter pub get
</pre>

Flutterについて、以下のバージョンであることを確認してください。  
<pre>
flutter --version
# Flutter 3.10.3 • channel stable • https://github.com/flutter/flutter.git
# Tools • Dart 3.0.3 • DevTools 2.23.1
</pre>
特にこのバージョンでなくても動作が可能であれば問題ありませんが、使用するIDEやパッケージのバージョン次第では非対応、あるいはコンフリクトを起こす可能性があります。

Flutterは基本的に、安定版の中では最新バージョンに整備した方が良いとされる開発ツールです。XcodeやAndroid Studio等のIDEも、バージョンを更新していない場合はここで更新しておきましょう。Flutterのバージョンアップをしたい場合は、以下のコマンドです。
<pre>
flutter upgrade
</pre>

パッケージのバージョンも上げたい場合は、以下のコマンドより。
<pre>
flutter pub upgrade
</pre>

実行環境が整備されているかを確認してください。対応するIDEにチェックが入っていること、実行するデバイスが認識されていることを確認してください。
<pre>
flutter doctor
flutter devices
</pre>

問題なければ、実行コマンドを試してみましょう。
<pre>
flutter pub run build_runner build
flutter run
</pre>


## ソフトウェアアーキテクチャについて

階層化アーキテクチャ、あるいはMVCやMVVM等で見かけるものを参考に作っています。データの定義(Model, Entities), 制御(Controller, ViewModel, Business Logic, Application), 表現(UI, View, Presentation)の三本柱で構成されています。色々と名称はありますが、あまり厳密なことは気にせず、抽象的にこんな括りなんだってことを意識すれば、理解は早いと思います。

今回のディレクトリ構成に当てはめるなら、以下のような対応関係であることが汲み取れます。

- freezed_entities: 定義
- providers: 制御
- widgets: 表現

まずはデータを定義。定義したら、それを制御する仕組みを書き、最終的にそれを表現として落とし込む。雑な説明ではありますが、このようなイメージで依存関係を理解されたいと思います。

# コードの読み方について

基本的には上記の要領でimport文から関係性を理解したり、注釈から個々の部品の意義を理解されたらいいと思いますが、いくらか注意されたい点があります。

まず、freezed_entitiesやprovidersについて、build_runnerを使って自動的にコード生成をしています。.freezed.dartや.g.dartが、その生成されたコードにあたります。これは読む必要はありません。

また、widgetsについてですが、

router.dart => screens => elements or dialogs

このような順番でソースコードを確認しに行ってみてください。router.dartを除いて、widgetsの中だけはソースコードに注釈をつけておりません。それは、各コンポーネントの仕様を公式に確認しに行ってほしいからです。また、それ以外のコンポーネントの必要性を問われましたら、それも各自で調べていただけたらと思います。

以上です。
